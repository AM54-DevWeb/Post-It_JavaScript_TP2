let resize=!1,move=!1,edit=!1,sourisXorig,sourisYorig,editText,tabId=[],numCase=0;function createCookie(name,value,days){if(days){var date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3);var expires="; expires="+date.toGMTString()}else var expires="";document.cookie=name+"="+value+expires+"; path=/;SameSite=None; Secure"}function readCookie(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function eraseCookie(name){createCookie(name,"",-1)}document.body.addEventListener("click",()=>{resize=!1,move=!1,edit=!1}),document.body.addEventListener("mousemove",e=>{sourisX=e.clientX,sourisY=e.clientY,1==move?(tabId[numCase].bouge(e.clientX-90,e.clientY-250),tabId[numCase].affiche(),console.log(tabId[numCase])):1==resize&&(tabId[numCase].redim(tabId[numCase].lOrigin+(e.clientX-tabId[numCase].sourisXorig),tabId[numCase].hOrigin+(e.clientY-tabId[numCase].sourisYorig)+25),tabId[numCase].affiche())}),document.body.addEventListener("keypress",e=>{1==edit&&("Enter"==e.key?(tabId[numCase].chContenu(tabId[numCase].texte+"</br>"),tabId[numCase].affiche()):" "==e.key?(tabId[numCase].chContenu(tabId[numCase].texte+"&nbsp;"),tabId[numCase].affiche()):(tabId[numCase].chContenu(tabId[numCase].texte+e.key),tabId[numCase].affiche()))}),document.body.addEventListener("keydown",e=>{"Backspace"==e.key&&"&nbsp;"==tabId[numCase].texte.substr(tabId[numCase].texte.length-6)?(tabId[numCase].chContenu(tabId[numCase].texte.slice(0,tabId[numCase].texte.length-6)),tabId[numCase].affiche()):"Backspace"==e.key&&"</br>"==tabId[numCase].texte.substr(tabId[numCase].texte.length-5)?(tabId[numCase].chContenu(tabId[numCase].texte.slice(0,tabId[numCase].texte.length-5)),tabId[numCase].affiche()):"Backspace"==e.key&&(tabId[numCase].chContenu(tabId[numCase].texte.slice(0,tabId[numCase].texte.length-1)),tabId[numCase].affiche())}),document.querySelector("#ajoutPostRed").onclick=function affichePost(){numCase=tabId.length;let postItAdd=new PostIt(tabId.length);tabId.push(postItAdd),postItAdd.chgCoul("red"),postItAdd.affiche()},document.querySelector("#ajoutPostGreen").onclick=function affichePost(){numCase=tabId.length;let postItAdd=new PostIt(tabId.length);tabId.push(postItAdd),postItAdd.chgCoul("green"),postItAdd.affiche()},document.querySelector("#ajoutPostBlue").onclick=function affichePost(){numCase=tabId.length;let postItAdd=new PostIt(tabId.length);tabId.push(postItAdd),postItAdd.chgCoul("blue"),postItAdd.affiche()},setInterval(()=>{createCookie("cookie1",JSON.stringify(tabId),7)},1e3),readCookie("cookie1");let tabCookie=JSON.parse(readCookie("cookie1"));for(let i in tabCookie)numCase=tabId.length,tabId.push(new PostIt(numCase)),tabId[numCase].majCookie(tabCookie[i].id,tabCookie[i].couleur,tabCookie[i].x,tabCookie[i].y,tabCookie[i].largeur,tabCookie[i].hauteur,tabCookie[i].editText,tabCookie[i].texte,tabCookie[i].fontSize),tabId[numCase].affiche(),console.log(tabId);